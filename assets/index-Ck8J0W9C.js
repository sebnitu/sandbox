var A=t=>{throw TypeError(t)};var B=(t,i,s)=>i.has(t)||A("Cannot "+s);var d=(t,i,s)=>(B(t,i,"read from private field"),s?s.call(t):i.get(t)),p=(t,i,s)=>i.has(t)?A("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(t):i.set(t,s),f=(t,i,s,e)=>(B(t,i,"write to private field"),e?e.call(t,s):i.set(t,s),s);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))e(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&e(r)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function e(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();const b=document.querySelector(".todo-list"),D=b.querySelectorAll(".todo"),N=150;let c=null,h=!1;D.forEach(t=>{t.addEventListener("click",s=>{s.target.closest(".todo__handle")||t.classList.contains("is-clicked")||(t.classList.add("is-clicked"),setTimeout(()=>{t.classList.remove("is-clicked")},1e3))});const i=t.querySelector(".todo__handle");i&&(t.setAttribute("draggable","false"),i.addEventListener("mousedown",()=>{t.setAttribute("draggable","true")}),i.addEventListener("mouseup",()=>{t.setAttribute("draggable","false")}),i.addEventListener("focus",()=>{t.setAttribute("draggable","true")}),i.addEventListener("blur",()=>{t.setAttribute("draggable","false")})),i.addEventListener("keydown",s=>{let e=null;switch(s.key){case"ArrowUp":if(e=t.previousElementSibling,e){const n=t.getBoundingClientRect(),o=e.getBoundingClientRect();e.before(t),L(t,n,o),E(e,o,n),i.focus()}return;case"ArrowDown":if(e=t.nextElementSibling,e){const n=t.getBoundingClientRect(),o=e.getBoundingClientRect();e.after(t),L(e,n,o),E(t,o,n),i.focus()}return;default:return}}),t.addEventListener("dragstart",()=>{b.classList.add("event-dragging"),t.classList.add("is-dragging"),c=t}),t.addEventListener("dragend",()=>{const s=c.querySelector(".todo__handle");b.classList.remove("event-dragging"),t.classList.remove("is-dragging"),c=null,h&&(console.log("Save order"),s&&s.focus(),i&&t.setAttribute("draggable","false"),h=!1)}),t.addEventListener("dragenter",()=>{if(t===c||t.getAnimations().length)return;const s=c.getBoundingClientRect(),e=t.getBoundingClientRect();c.getBoundingClientRect().top>t.getBoundingClientRect().top+t.getBoundingClientRect().height/2?(t.before(c),L(c,s,e),E(t,e,s)):(t.after(c),L(t,e,s),E(c,s,e)),h=!0}),t.addEventListener("dragover",s=>{s.preventDefault()}),t.addEventListener("drop",s=>{s.preventDefault();const e=c.querySelector(".todo__handle");console.log("Save order"),e&&e.focus(),i&&t.setAttribute("draggable","false"),h=!1}),i.addEventListener("touchstart",()=>{console.log("touchstart"),b.classList.add("event-touching"),t.classList.add("is-touching"),c=t}),i.addEventListener("touchmove",s=>{s.preventDefault();const e=b.getBoundingClientRect();if(R(s.changedTouches[0],e)){const n=[...D].find(m=>m!=c&&!m.getAnimations().length&&R(s.changedTouches[0],m.getBoundingClientRect()));if(!n)return;const o=c.getBoundingClientRect(),r=n.getBoundingClientRect();c.getBoundingClientRect().top>n.getBoundingClientRect().top+n.getBoundingClientRect().height/2?(n.before(c),L(c,o,r),E(n,r,o)):(n.after(c),L(n,r,o),E(c,o,r)),h=!0}}),i.addEventListener("touchend",s=>{console.log("touchend");const e=c.querySelector(".todo__handle");b.classList.remove("event-touching"),t.classList.remove("is-touching"),c=null,h&&(console.log("Save order"),e&&e.focus(),h=!1)}),i.addEventListener("touchcancel",s=>{console.log("touchcancel",s);const e=c.querySelector(".todo__handle");b.classList.remove("event-touching"),t.classList.remove("is-touching"),c=null,h&&(console.log("Save order"),e&&e.focus(),h=!1)})});function R(t,i){return t.clientX>i.left&&t.clientX<i.right&&t.clientY>i.top&&t.clientY<i.bottom}function L(...t){M(...t)}function E(...t){M(...t,"-")}function M(t,i,s,e=""){const n=t.offsetWidth+parseInt(getComputedStyle(t.parentElement).gap),o=t.offsetHeight+parseInt(getComputedStyle(t.parentElement).gap);let r=F(i.left-s.left,n),m=F(i.top-s.top,o);const l=[{transform:`translate3D(${e}${r}px, ${e}${m}px, 0)`},{transform:"translate3d(0, 0, 0)"}];t.animate(l,{duration:N,easing:"ease"})}function F(t,i){return t=Math.abs(t),t>i?i:t}var u;class j{constructor(i,s){p(this,u);this.value=i,f(this,u,s),this.mql=null}get handler(){return d(this,u)}set handler(i){this.mql&&this.mql.removeEventListener("change",d(this,u)),f(this,u,i)}mount(i,s){return i&&(this.value=i),s&&f(this,u,s),this.value?(this.mql=window.matchMedia(`(min-width: ${this.value})`),this.mql.addEventListener("change",d(this,u)),d(this,u).call(this,this.mql),this):this}unmount(){return this.mql?(this.mql.removeEventListener("change",d(this,u)),this.value=null,f(this,u,null),this.mql=null,this):this}}u=new WeakMap;class H{constructor(){this.collection=[]}async register(i){return await this.deregister(i),this.collection.push(i),this.collection}async deregister(i){const s=this.collection.findIndex(e=>e===i);if(s>=0){const e=this.collection[s];Object.getOwnPropertyNames(e).forEach(n=>{delete e[n]}),this.collection.splice(s,1)}return this.collection}async registerCollection(i){return await Promise.all(Array.from(i,s=>{this.register(s)})),this.collection}async deregisterCollection(){for(;this.collection.length>0;)await this.deregister(this.collection[0]);return this.collection}get(i,s="id"){return this.collection.find(e=>e[s]===i)}}const a={inert:":not([inert]):not([inert] *)",negTabIndex:':not([tabindex^="-"])',disabled:":not(:disabled)"},K=[`a[href]${a.inert}${a.negTabIndex}`,`area[href]${a.inert}${a.negTabIndex}`,`input:not([type="hidden"]):not([type="radio"])${a.inert}${a.negTabIndex}${a.disabled}`,`input[type="radio"]${a.inert}${a.negTabIndex}${a.disabled}`,`select${a.inert}${a.negTabIndex}${a.disabled}`,`textarea${a.inert}${a.negTabIndex}${a.disabled}`,`button${a.inert}${a.negTabIndex}${a.disabled}`,`details${a.inert} > summary:first-of-type${a.negTabIndex}`,`iframe${a.inert}${a.negTabIndex}`,`audio[controls]${a.inert}${a.negTabIndex}`,`video[controls]${a.inert}${a.negTabIndex}`,`[contenteditable]${a.inert}${a.negTabIndex}`,`[tabindex]${a.inert}${a.negTabIndex}`];var $,v,w;class X{constructor(i=null,s="[data-focus]"){p(this,$);p(this,v);p(this,w);this.el=i,this.selectorFocus=s,f(this,v,Y.bind(this)),f(this,w,J.bind(this))}get focusable(){return d(this,$)}set focusable(i){f(this,$,i),d(this,$).length?(document.removeEventListener("keydown",d(this,w)),document.addEventListener("keydown",d(this,v))):(document.removeEventListener("keydown",d(this,v)),document.addEventListener("keydown",d(this,w)))}get focusableFirst(){return this.focusable[0]}get focusableLast(){return this.focusable[this.focusable.length-1]}mount(i,s){i&&(this.el=i),s&&(this.selectorFocus=s),this.focusable=this.getFocusable(),this.focus()}unmount(){this.el=null,this.focusable=[],document.removeEventListener("keydown",d(this,v)),document.removeEventListener("keydown",d(this,w))}focus(i=this.el,s=this.selectorFocus){(i.querySelector(s)||i).focus()}getFocusable(i=this.el){const s=[],e=document.activeElement,n=i.scrollTop;return i.querySelectorAll(K.join(",")).forEach(r=>{r.focus(),document.activeElement===r&&s.push(r)}),i.scrollTop=n,e.focus(),s}}$=new WeakMap,v=new WeakMap,w=new WeakMap;function Y(t){(t.key==="Tab"||t.keyCode===9)&&(t.shiftKey?(document.activeElement===this.focusableFirst||document.activeElement===this.el)&&(t.preventDefault(),this.focusableLast.focus()):(document.activeElement===this.focusableLast||document.activeElement===this.el)&&(t.preventDefault(),this.focusableFirst.focus()))}function J(t){(t.key==="Tab"||t.keyCode===9)&&t.preventDefault()}function P(){return getComputedStyle(document.body).getPropertyValue("--vb-prefix").trim()}function U(t,i=document.body){if(t.slice(0,2)!=="--"){const e=P();e&&(t=`${e}${t}`),t=`--${t}`}const s=getComputedStyle(i).getPropertyValue(t).trim();if(s)return s;throw new Error(`CSS variable "${t}" was not found!`)}function G(t,i){const e=(t.getAttribute(`data-${i}`)||"").replace(/'/g,'"');return e?JSON.parse(e):{}}function W(t,i=!0){const s=localStorage.getItem(t),e=s?JSON.parse(s):{};return{get(n){return n?e[n]:e},set(n,o){return o?e[n]=o:delete e[n],i&&localStorage.setItem(t,JSON.stringify(e)),e}}}function _(t,i,s,e="transition-duration"){return new Promise(n=>{if(typeof e=="string"){const o=U(e,t),r=!!o.includes("ms");e=parseFloat(o)*(r?1:1e3)}t.classList.remove(i.finish),t.classList.add(s.start),setTimeout(()=>{t.classList.add(s.finish),t.classList.remove(s.start),n(t)},e)})}function z(t,i){i&&document.querySelectorAll(i).forEach(e=>{t?e.style.overflow="hidden":e.style.removeProperty("overflow")})}function Q(t,i){i&&document.querySelectorAll(i).forEach(e=>{t?(e.inert=!0,e.setAttribute("aria-hidden",!0)):(e.inert=null,e.removeAttribute("aria-hidden"))})}function I(t,i){Q(!!t,i.selectorInert),z(!!t,i.selectorOverflow)}const Z={autoMount:!1,dataOpen:"drawer-open",dataClose:"drawer-close",dataToggle:"drawer-toggle",dataBreakpoint:"drawer-breakpoint",dataConfig:"drawer-config",selectorDrawer:".drawer",selectorDialog:".drawer__dialog",selectorScreen:".drawer",selectorFocus:"[data-focus]",selectorInert:null,selectorOverflow:"body",stateOpened:"is-opened",stateOpening:"is-opening",stateClosing:"is-closing",stateClosed:"is-closed",classModal:"drawer_modal",breakpoints:null,customEventPrefix:"drawer:",eventListeners:!0,store:!0,storeKey:"VB:DrawerState",setTabindex:!0,transition:!0,transitionDuration:"drawer-transition-duration"};function tt(t){t.store==="opened"?t.open(!1,!1):t.store==="closed"?t.close(!1,!1):t.store==="indeterminate"?t.state="indeterminate":t.el.classList.contains(t.getSetting("stateOpened"))?t.open(!1,!1):t.el.classList.contains(t.getSetting("stateClosed"))?t.close(!1,!1):t.state="indeterminate"}async function et(t){t.store==="opened"?await t.open(!1,!1):t.store==="closed"?await t.close(!1,!1):t.store==="indeterminate"?t.state!="indeterminate"&&(t.state="indeterminate"):(t.state!=t.inlineState&&(t.state=t.inlineState),t.inlineState==="opened"?await t.open(!1,!1):t.inlineState==="closed"&&await t.close(!1,!1))}function st(t){const i=P(),s=t.getAttribute(`data-${this.settings.dataBreakpoint}`);return this.settings.breakpoints&&this.settings.breakpoints[s]?this.settings.breakpoints[s]:getComputedStyle(document.body).getPropertyValue(`--${i}breakpoint-${s}`).trim()?getComputedStyle(document.body).getPropertyValue(`--${i}breakpoint-${s}`).trim():s}function S(t){const i=typeof t=="string"?this.get(t):this.get(t.id);if(i)return i;throw new Error(`Drawer not found in collection with id of "${t.id||t}".`)}function q(t){t.state==="opened"?t.mode==="modal"?this.focusTrap.mount(t.dialog,this.settings.selectorFocus):this.focusTrap.focus(t.dialog,this.settings.selectorFocus):(t.trigger&&(t.trigger.focus(),t.trigger=null),this.focusTrap.unmount())}async function it(t){const i=t.target.closest(`
    [data-${this.settings.dataOpen}],
    [data-${this.settings.dataToggle}],
    [data-${this.settings.dataClose}]
  `);if(i){t.preventDefault(),i.matches(`[data-${this.settings.dataToggle}]`)&&i.getAttribute(`data-${this.settings.dataToggle}`).trim().split(" ").forEach(e=>{const n=S.call(this,e);return n.trigger=i,n.toggle()}),i.matches(`[data-${this.settings.dataOpen}]`)&&i.getAttribute(`data-${this.settings.dataOpen}`).trim().split(" ").forEach(e=>{const n=S.call(this,e);return n.trigger=i,n.open()}),i.matches(`[data-${this.settings.dataClose}]`)&&i.getAttribute(`data-${this.settings.dataClose}`).trim().split(" ").forEach(e=>{if(e){const n=S.call(this,e);return n.trigger=i,n.close()}else{const n=t.target.closest(this.settings.selectorDrawer);if(n)return this.close(n)}});return}if(this.activeModal&&t.target.matches(this.settings.selectorScreen))return this.close(this.activeModal.id)}function nt(t){if(t.key==="Escape"&&this.activeModal)return this.close(this.activeModal)}async function y(t,i=!0){const s=this.collection.findIndex(e=>e.id===t.id);if(s>=0){const e=this.collection[s];i&&e.state==="opened"&&await e.close(!1),this.store.set(e.id),e.unmountBreakpoint(),Object.getOwnPropertyNames(e).forEach(n=>{delete e[n]}),this.collection.splice(s,1)}return this.collection}async function O(t,i,s=!0){const e=S.call(this,t),n={...this.settings,...e.settings};return i!==void 0&&(n.transition=i),(e.state==="closed"||e.state==="indeterminate")&&(e.state="opening",n.transition?await _(e.el,{start:n.stateClosing,finish:n.stateClosed},{start:n.stateOpening,finish:n.stateOpened},n.transitionDuration):(e.el.classList.add(n.stateOpened),e.el.classList.remove(n.stateClosed)),e.state="opened",e.mode==="modal"&&I(!0,n),s&&q.call(this,e),e.el.dispatchEvent(new CustomEvent(n.customEventPrefix+"opened",{detail:this,bubbles:!0}))),e}async function T(t,i,s=!0){const e=S.call(this,t),n={...this.settings,...e.settings};return i!==void 0&&(n.transition=i),(e.state==="opened"||e.state==="indeterminate")&&(e.state="closing",document.activeElement.blur(),n.transition?await _(e.el,{start:n.stateOpening,finish:n.stateOpened},{start:n.stateClosing,finish:n.stateClosed},n.transitionDuration):(e.el.classList.add(n.stateClosed),e.el.classList.remove(n.stateOpened)),e.state="closed",e.mode==="modal"&&I(!1,n),s&&q.call(this,e),e.el.dispatchEvent(new CustomEvent(n.customEventPrefix+"closed",{detail:this,bubbles:!0}))),e}async function V(t,i,s){const e=S.call(this,t);return e.state==="closed"?O.call(this,e,i,s):T.call(this,e,i,s)}function ot(t){switch(t.mode){case"inline":return at.call(this,t);case"modal":return rt.call(this,t);default:throw new Error(`"${t.mode}" is not a valid drawer mode.`)}}async function at(t){return t.el.classList.remove(t.getSetting("classModal")),t.dialog.removeAttribute("aria-modal"),I(!1,{...this.settings,...t.settings}),this.focusTrap.unmount(),await et(t),t.el.dispatchEvent(new CustomEvent(t.getSetting("customEventPrefix")+"switchMode",{detail:this,bubbles:!0})),t}async function rt(t){return t.el.classList.add(t.getSetting("classModal")),t.dialog.setAttribute("aria-modal","true"),await T.call(this,t,!1,!1),t.el.dispatchEvent(new CustomEvent(t.getSetting("customEventPrefix")+"switchMode",{detail:this,bubbles:!0})),t}async function lt(t,i={}){await y.call(this,t,!1);const s=this,e=new j;let n,o="indeterminate";const r={id:t.id,el:t,dialog:null,trigger:null,settings:{...G(t,this.settings.dataConfig),...i},inlineState:"indeterminate",get breakpoint(){return st.call(s,t)},get store(){return s.store.get(this.id)},get mode(){return n},set mode(l){n=l,ot.call(s,this)},get state(){return o},set state(l){o=l,this.mode==="inline"&&l!="opening"&&l!="closing"&&(this.inlineState=l,this.getSetting("store")&&s.store.set(this.id,l)),l==="indeterminate"&&(this.el.classList.remove(this.getSetting("stateOpened")),this.el.classList.remove(this.getSetting("stateOpening")),this.el.classList.remove(this.getSetting("stateClosed")),this.el.classList.remove(this.getSetting("stateClosing")))},open(l,g){return O.call(s,this,l,g)},close(l,g){return T.call(s,this,l,g)},toggle(l,g){return V.call(s,this,l,g)},deregister(){return y.call(s,this)},mountBreakpoint(){const l=this.breakpoint,g=this.handleBreakpoint.bind(this);return e.mount(l,g),this},unmountBreakpoint(){return e.unmount(),this},handleBreakpoint(l){const g=l.matches?"inline":"modal";return this.mode!=g&&(this.mode=g),this},getSetting(l){return l in this.settings?this.settings[l]:s.settings[l]}};this.collection.push(r);const m=t.querySelector(r.getSetting("selectorDialog"));return r.dialog=m||t,r.getSetting("setTabindex")&&r.dialog.setAttribute("tabindex","-1"),await tt(r),r.inlineState=r.state,r.mode=t.classList.contains(r.getSetting("classModal"))?"modal":"inline",r.breakpoint&&r.mountBreakpoint(),r}var C,x;class ct extends H{constructor(s){super();p(this,C);p(this,x);this.defaults=Z,this.settings={...this.defaults,...s},this.focusTrap=new X,this.store=W(this.settings.storeKey,this.settings.store),f(this,C,it.bind(this)),f(this,x,nt.bind(this)),this.settings.autoMount&&this.mount()}get activeModal(){return this.collection.find(s=>s.state==="opened"&&s.mode==="modal")}async mount(s=null){s&&(this.settings={...this.settings,...s});const e=document.querySelectorAll(this.settings.selectorDrawer);return await this.registerCollection(e),this.settings.eventListeners&&this.mountEventListeners(),this}async unmount(){return await this.deregisterCollection(),this.settings.eventListeners&&this.unmountEventListeners(),this}mountEventListeners(){document.addEventListener("click",d(this,C),!1),document.addEventListener("keydown",d(this,x),!1)}unmountEventListeners(){document.removeEventListener("click",d(this,C),!1),document.removeEventListener("keydown",d(this,x),!1)}register(s,e={}){let n=typeof s=="string"?document.getElementById(s):s;return n?lt.call(this,n,e):Promise.reject(new Error(`Failed to register; drawer not found with ID of: "${s.id||s}".`))}deregister(s){let e=this.get(s.id||s);return e?y.call(this,e):Promise.reject(new Error(`Failed to deregister; drawer does not exist in collection with ID of: "${s.id||s}".`))}open(s,e,n){return O.call(this,s,e,n)}close(s,e,n){return T.call(this,s,e,n)}toggle(s,e,n){return V.call(this,s,e,n)}}C=new WeakMap,x=new WeakMap;const k=new ct({autoMount:!0});k.mount().then(()=>k.register("aside-drawer",{classModal:"aside_modal",store:!1})).then(()=>{window.drawer=k});
