var q=Object.defineProperty;var k=t=>{throw TypeError(t)};var V=(t,e,s)=>e in t?q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var I=(t,e,s)=>V(t,typeof e!="symbol"?e+"":e,s),O=(t,e,s)=>e.has(t)||k("Cannot "+s);var c=(t,e,s)=>(O(t,e,"read from private field"),s?s.call(t):e.get(t)),h=(t,e,s)=>e.has(t)?k("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),g=(t,e,s,i)=>(O(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}})();var d;class N{constructor(e,s){h(this,d);this.value=e,g(this,d,s),this.mql=null}get handler(){return c(this,d)}set handler(e){this.mql&&this.mql.removeEventListener("change",c(this,d)),g(this,d,e)}mount(e,s){return e&&(this.value=e),s&&g(this,d,s),this.value?(this.mql=window.matchMedia(`(min-width: ${this.value})`),this.mql.addEventListener("change",c(this,d)),c(this,d).call(this,this.mql),this):this}unmount(){return this.mql?(this.mql.removeEventListener("change",c(this,d)),this.value=null,g(this,d,null),this.mql=null,this):this}}d=new WeakMap;class D{constructor(){this.collection=[]}async register(e){return await this.deregister(e),this.collection.push(e),this.collection}async deregister(e){const s=this.collection.findIndex(i=>i===e);if(s>=0){const i=this.collection[s];Object.getOwnPropertyNames(i).forEach(n=>{delete i[n]}),this.collection.splice(s,1)}return this.collection}async registerCollection(e){return await Promise.all(Array.from(e,s=>{this.register(s)})),this.collection}async deregisterCollection(){for(;this.collection.length>0;)await this.deregister(this.collection[0]);return this.collection}get(e,s="id"){return this.collection.find(i=>i[s]===e)}}const o={inert:":not([inert]):not([inert] *)",negTabIndex:':not([tabindex^="-"])',disabled:":not(:disabled)"},j=[`a[href]${o.inert}${o.negTabIndex}`,`area[href]${o.inert}${o.negTabIndex}`,`input:not([type="hidden"]):not([type="radio"])${o.inert}${o.negTabIndex}${o.disabled}`,`input[type="radio"]${o.inert}${o.negTabIndex}${o.disabled}`,`select${o.inert}${o.negTabIndex}${o.disabled}`,`textarea${o.inert}${o.negTabIndex}${o.disabled}`,`button${o.inert}${o.negTabIndex}${o.disabled}`,`details${o.inert} > summary:first-of-type${o.negTabIndex}`,`iframe${o.inert}${o.negTabIndex}`,`audio[controls]${o.inert}${o.negTabIndex}`,`video[controls]${o.inert}${o.negTabIndex}`,`[contenteditable]${o.inert}${o.negTabIndex}`,`[tabindex]${o.inert}${o.negTabIndex}`];var v,f,m;class K{constructor(e=null,s="[data-focus]"){h(this,v);h(this,f);h(this,m);this.el=e,this.selectorFocus=s,g(this,f,Y.bind(this)),g(this,m,J.bind(this))}get focusable(){return c(this,v)}set focusable(e){g(this,v,e),c(this,v).length?(document.removeEventListener("keydown",c(this,m)),document.addEventListener("keydown",c(this,f))):(document.removeEventListener("keydown",c(this,f)),document.addEventListener("keydown",c(this,m)))}get focusableFirst(){return this.focusable[0]}get focusableLast(){return this.focusable[this.focusable.length-1]}mount(e,s){e&&(this.el=e),s&&(this.selectorFocus=s),this.focusable=this.getFocusable(),this.focus()}unmount(){this.el=null,this.focusable=[],document.removeEventListener("keydown",c(this,f)),document.removeEventListener("keydown",c(this,m))}focus(e=this.el,s=this.selectorFocus){(e.querySelector(s)||e).focus()}getFocusable(e=this.el){const s=[],i=document.activeElement,n=e.scrollTop;return e.querySelectorAll(j.join(",")).forEach(r=>{r.focus(),document.activeElement===r&&s.push(r)}),e.scrollTop=n,i.focus(),s}}v=new WeakMap,f=new WeakMap,m=new WeakMap;function Y(t){(t.key==="Tab"||t.keyCode===9)&&(t.shiftKey?(document.activeElement===this.focusableFirst||document.activeElement===this.el)&&(t.preventDefault(),this.focusableLast.focus()):(document.activeElement===this.focusableLast||document.activeElement===this.el)&&(t.preventDefault(),this.focusableFirst.focus()))}function J(t){(t.key==="Tab"||t.keyCode===9)&&t.preventDefault()}function R(){return getComputedStyle(document.body).getPropertyValue("--vb-prefix").trim()}function H(t,e=document.body){if(t.slice(0,2)!=="--"){const i=R();i&&(t=`${i}${t}`),t=`--${t}`}const s=getComputedStyle(e).getPropertyValue(t).trim();if(s)return s;throw new Error(`CSS variable "${t}" was not found!`)}function X(t,e){const i=(t.getAttribute(`data-${e}`)||"").replace(/'/g,'"');return i?JSON.parse(i):{}}function G(t,e=!0){const s=localStorage.getItem(t),i=s?JSON.parse(s):{};return{get(n){return n?i[n]:i},set(n,a){return a?i[n]=a:delete i[n],e&&localStorage.setItem(t,JSON.stringify(i)),i}}}function F(t,e,s,i="transition-duration"){return new Promise(n=>{if(typeof i=="string"){const a=H(i,t),r=!!a.includes("ms");i=parseFloat(a)*(r?1:1e3)}t.classList.remove(e.finish),t.classList.add(s.start),setTimeout(()=>{t.classList.add(s.finish),t.classList.remove(s.start),n(t)},i)})}function z(t,e){e&&document.querySelectorAll(e).forEach(i=>{t?i.style.overflow="hidden":i.style.removeProperty("overflow")})}function Q(t,e){e&&document.querySelectorAll(e).forEach(i=>{t?(i.inert=!0,i.setAttribute("aria-hidden",!0)):(i.inert=null,i.removeAttribute("aria-hidden"))})}function T(t,e){Q(!!t,e.selectorInert),z(!!t,e.selectorOverflow)}function P(t,e,s,i=""){const n=parseInt(getComputedStyle(t.parentElement).gap),a=e.height+n,r=[{transform:`translateY(${i}${a}px)`},{transform:"translateY(0)"}];t.animate(r,{duration:s,easing:"ease"})}function L(...t){P(...t)}function S(...t){P(...t,"-")}function W(t){const e=t.querySelector(this.settings.handle);e&&(t.setAttribute("draggable","false"),e.addEventListener("mousedown",()=>{t.setAttribute("draggable","true")}),e.addEventListener("mouseup",()=>{t.setAttribute("draggable","false")}),e.addEventListener("focus",()=>{t.setAttribute("draggable","true")}),e.addEventListener("blur",()=>{t.setAttribute("draggable","false")}),e.addEventListener("keydown",s=>{let i=null;switch(s.key){case"ArrowUp":if(i=t.previousElementSibling,i){const n=t.getBoundingClientRect(),a=i.getBoundingClientRect();i.before(t),L(t,a,this.settings.duration),S(i,n,this.settings.duration),e.focus(),this.maybeUpdate(!0)}return;case"ArrowDown":if(i=t.nextElementSibling,i){const n=t.getBoundingClientRect(),a=i.getBoundingClientRect();i.after(t),L(i,n,this.settings.duration),S(t,a,this.settings.duration),e.focus(),this.maybeUpdate(!0)}return;default:return}}))}function Z(t){t.addEventListener("dragstart",()=>{this.list.classList.add("event-dragging"),t.classList.add("is-dragging"),this.dragging=t}),t.addEventListener("dragend",()=>{this.list.classList.remove("event-dragging"),t.classList.remove("is-dragging"),t.setAttribute("draggable","false"),this.dragging.querySelector(this.settings.handle).focus(),this.dragging=null,this.maybeUpdate()}),t.addEventListener("dragenter",()=>{if(t===this.dragging||t.getAnimations().length)return;const e=this.dragging.getBoundingClientRect(),s=t.getBoundingClientRect();this.dragging.getBoundingClientRect().top>t.getBoundingClientRect().top+t.getBoundingClientRect().height/2?(t.before(this.dragging),L(this.dragging,s,this.settings.duration),S(t,e,this.settings.duration)):(t.after(this.dragging),L(t,e,this.settings.duration),S(this.dragging,s,this.settings.duration)),this.hasUpdated=!0}),t.addEventListener("dragover",e=>{e.preventDefault()}),t.addEventListener("drop",e=>{e.preventDefault()})}function tt(t){this.cacheItem=t,setTimeout(()=>{this.cacheItem=null},this.settings.cacheDuration)}function A(t,e){return t.clientX>e.left&&t.clientX<e.right&&t.clientY>e.top&&t.clientY<e.bottom}function et(t){const e=t.querySelector(this.settings.handle);e.addEventListener("touchstart",()=>{this.list.classList.add("event-touching"),t.classList.add("is-touching"),this.dragging=t}),e.addEventListener("touchmove",s=>{s.preventDefault();const i=this.list.getBoundingClientRect();if(A(s.changedTouches[0],i)){const n=[...this.items].find(p=>p!=this.dragging&&!p.getAnimations().length&&A(s.changedTouches[0],p.getBoundingClientRect()));if(!n||n===this.cacheItem)return;const a=this.dragging.getBoundingClientRect(),r=n.getBoundingClientRect();this.dragging.getBoundingClientRect().top>n.getBoundingClientRect().top+n.getBoundingClientRect().height/2?(n.before(this.dragging),L(this.dragging,r,this.settings.duration),S(n,a,this.settings.duration)):(n.after(this.dragging),L(n,a,this.settings.duration),S(this.dragging,r,this.settings.duration)),tt.call(this,n),this.hasUpdated=!0}}),e.addEventListener("touchend",()=>{this.list.classList.remove("event-touching"),t.classList.remove("is-touching"),this.dragging.querySelector(this.settings.handle).focus(),this.dragging=null,this.maybeUpdate()}),e.addEventListener("touchcancel",()=>{this.list.classList.remove("event-touching"),t.classList.remove("is-touching"),this.dragging.querySelector(this.settings.handle).focus(),this.dragging=null,this.maybeUpdate()})}function st(t){const e={...t};e.id=e.list.id,e.items=e.list.querySelectorAll(e.settings.items),e.dragging=null,e.cacheItem=null,e.hasUpdated=!1,e.maybeUpdate=(s=!1)=>{(e.hasUpdated||s)&&(e.hasUpdated=!1,e.onUpdated.call(e,e))},e.items.forEach(s=>{W.call(e,s),Z.call(e,s),et.call(e,s)}),this.collection.push(e)}class it extends D{constructor(s){super();I(this,"defaults",{list:".sortable",items:".sortable__item",handle:".sortable__handle",duration:150,cacheDuration:750});this.settings={...this.defaults,...s}}register(s,i){s={...this.settings,...s};const n=document.querySelector(s.list);n?st.call(this,{list:n,onUpdated:i,settings:s}):console.error(`Sortable could not find list: "${s.list}"`)}}const nt={autoMount:!1,dataOpen:"drawer-open",dataClose:"drawer-close",dataToggle:"drawer-toggle",dataBreakpoint:"drawer-breakpoint",dataConfig:"drawer-config",selectorDrawer:".drawer",selectorDialog:".drawer__dialog",selectorScreen:".drawer",selectorFocus:"[data-focus]",selectorInert:null,selectorOverflow:"body",stateOpened:"is-opened",stateOpening:"is-opening",stateClosing:"is-closing",stateClosed:"is-closed",classModal:"drawer_modal",breakpoints:null,customEventPrefix:"drawer:",eventListeners:!0,store:!0,storeKey:"VB:DrawerState",setTabindex:!0,transition:!0,transitionDuration:"drawer-transition-duration"};function ot(t){t.store==="opened"?t.open(!1,!1):t.store==="closed"?t.close(!1,!1):t.store==="indeterminate"?t.state="indeterminate":t.el.classList.contains(t.getSetting("stateOpened"))?t.open(!1,!1):t.el.classList.contains(t.getSetting("stateClosed"))?t.close(!1,!1):t.state="indeterminate"}async function at(t){t.store==="opened"?await t.open(!1,!1):t.store==="closed"?await t.close(!1,!1):t.store==="indeterminate"?t.state!="indeterminate"&&(t.state="indeterminate"):(t.state!=t.inlineState&&(t.state=t.inlineState),t.inlineState==="opened"?await t.open(!1,!1):t.inlineState==="closed"&&await t.close(!1,!1))}function rt(t){const e=R(),s=t.getAttribute(`data-${this.settings.dataBreakpoint}`);return this.settings.breakpoints&&this.settings.breakpoints[s]?this.settings.breakpoints[s]:getComputedStyle(document.body).getPropertyValue(`--${e}breakpoint-${s}`).trim()?getComputedStyle(document.body).getPropertyValue(`--${e}breakpoint-${s}`).trim():s}function b(t){const e=typeof t=="string"?this.get(t):this.get(t.id);if(e)return e;throw new Error(`Drawer not found in collection with id of "${t.id||t}".`)}function M(t){t.state==="opened"?t.mode==="modal"?this.focusTrap.mount(t.dialog,this.settings.selectorFocus):this.focusTrap.focus(t.dialog,this.settings.selectorFocus):(t.trigger&&(t.trigger.focus(),t.trigger=null),this.focusTrap.unmount())}async function lt(t){const e=t.target.closest(`
    [data-${this.settings.dataOpen}],
    [data-${this.settings.dataToggle}],
    [data-${this.settings.dataClose}]
  `);if(e){t.preventDefault(),e.matches(`[data-${this.settings.dataToggle}]`)&&e.getAttribute(`data-${this.settings.dataToggle}`).trim().split(" ").forEach(i=>{const n=b.call(this,i);return n.trigger=e,n.toggle()}),e.matches(`[data-${this.settings.dataOpen}]`)&&e.getAttribute(`data-${this.settings.dataOpen}`).trim().split(" ").forEach(i=>{const n=b.call(this,i);return n.trigger=e,n.open()}),e.matches(`[data-${this.settings.dataClose}]`)&&e.getAttribute(`data-${this.settings.dataClose}`).trim().split(" ").forEach(i=>{if(i){const n=b.call(this,i);return n.trigger=e,n.close()}else{const n=t.target.closest(this.settings.selectorDrawer);if(n)return this.close(n)}});return}if(this.activeModal&&t.target.matches(this.settings.selectorScreen))return this.close(this.activeModal.id)}function ct(t){if(t.key==="Escape"&&this.activeModal)return this.close(this.activeModal)}async function y(t,e=!0){const s=this.collection.findIndex(i=>i.id===t.id);if(s>=0){const i=this.collection[s];e&&i.state==="opened"&&await i.close(!1),this.store.set(i.id),i.unmountBreakpoint(),Object.getOwnPropertyNames(i).forEach(n=>{delete i[n]}),this.collection.splice(s,1)}return this.collection}async function x(t,e,s=!0){const i=b.call(this,t),n={...this.settings,...i.settings};return e!==void 0&&(n.transition=e),(i.state==="closed"||i.state==="indeterminate")&&(i.state="opening",n.transition?await F(i.el,{start:n.stateClosing,finish:n.stateClosed},{start:n.stateOpening,finish:n.stateOpened},n.transitionDuration):(i.el.classList.add(n.stateOpened),i.el.classList.remove(n.stateClosed)),i.state="opened",i.mode==="modal"&&T(!0,n),s&&M.call(this,i),i.el.dispatchEvent(new CustomEvent(n.customEventPrefix+"opened",{detail:this,bubbles:!0}))),i}async function $(t,e,s=!0){const i=b.call(this,t),n={...this.settings,...i.settings};return e!==void 0&&(n.transition=e),(i.state==="opened"||i.state==="indeterminate")&&(i.state="closing",document.activeElement.blur(),n.transition?await F(i.el,{start:n.stateOpening,finish:n.stateOpened},{start:n.stateClosing,finish:n.stateClosed},n.transitionDuration):(i.el.classList.add(n.stateClosed),i.el.classList.remove(n.stateOpened)),i.state="closed",i.mode==="modal"&&T(!1,n),s&&M.call(this,i),i.el.dispatchEvent(new CustomEvent(n.customEventPrefix+"closed",{detail:this,bubbles:!0}))),i}async function _(t,e,s){const i=b.call(this,t);return i.state==="closed"?x.call(this,i,e,s):$.call(this,i,e,s)}function dt(t){switch(t.mode){case"inline":return ut.call(this,t);case"modal":return gt.call(this,t);default:throw new Error(`"${t.mode}" is not a valid drawer mode.`)}}async function ut(t){return t.el.classList.remove(t.getSetting("classModal")),t.dialog.removeAttribute("aria-modal"),T(!1,{...this.settings,...t.settings}),this.focusTrap.unmount(),await at(t),t.el.dispatchEvent(new CustomEvent(t.getSetting("customEventPrefix")+"switchMode",{detail:this,bubbles:!0})),t}async function gt(t){return t.el.classList.add(t.getSetting("classModal")),t.dialog.setAttribute("aria-modal","true"),await $.call(this,t,!1,!1),t.el.dispatchEvent(new CustomEvent(t.getSetting("customEventPrefix")+"switchMode",{detail:this,bubbles:!0})),t}async function ht(t,e={}){await y.call(this,t,!1);const s=this,i=new N;let n,a="indeterminate";const r={id:t.id,el:t,dialog:null,trigger:null,settings:{...X(t,this.settings.dataConfig),...e},inlineState:"indeterminate",get breakpoint(){return rt.call(s,t)},get store(){return s.store.get(this.id)},get mode(){return n},set mode(l){n=l,dt.call(s,this)},get state(){return a},set state(l){a=l,this.mode==="inline"&&l!="opening"&&l!="closing"&&(this.inlineState=l,this.getSetting("store")&&s.store.set(this.id,l)),l==="indeterminate"&&(this.el.classList.remove(this.getSetting("stateOpened")),this.el.classList.remove(this.getSetting("stateOpening")),this.el.classList.remove(this.getSetting("stateClosed")),this.el.classList.remove(this.getSetting("stateClosing")))},open(l,u){return x.call(s,this,l,u)},close(l,u){return $.call(s,this,l,u)},toggle(l,u){return _.call(s,this,l,u)},deregister(){return y.call(s,this)},mountBreakpoint(){const l=this.breakpoint,u=this.handleBreakpoint.bind(this);return i.mount(l,u),this},unmountBreakpoint(){return i.unmount(),this},handleBreakpoint(l){const u=l.matches?"inline":"modal";return this.mode!=u&&(this.mode=u),this},getSetting(l){return l in this.settings?this.settings[l]:s.settings[l]}};this.collection.push(r);const p=t.querySelector(r.getSetting("selectorDialog"));return r.dialog=p||t,r.getSetting("setTabindex")&&r.dialog.setAttribute("tabindex","-1"),await ot(r),r.inlineState=r.state,r.mode=t.classList.contains(r.getSetting("classModal"))?"modal":"inline",r.breakpoint&&r.mountBreakpoint(),r}var w,E;class ft extends D{constructor(s){super();h(this,w);h(this,E);this.defaults=nt,this.settings={...this.defaults,...s},this.focusTrap=new K,this.store=G(this.settings.storeKey,this.settings.store),g(this,w,lt.bind(this)),g(this,E,ct.bind(this)),this.settings.autoMount&&this.mount()}get activeModal(){return this.collection.find(s=>s.state==="opened"&&s.mode==="modal")}async mount(s=null){s&&(this.settings={...this.settings,...s});const i=document.querySelectorAll(this.settings.selectorDrawer);return await this.registerCollection(i),this.settings.eventListeners&&this.mountEventListeners(),this}async unmount(){return await this.deregisterCollection(),this.settings.eventListeners&&this.unmountEventListeners(),this}mountEventListeners(){document.addEventListener("click",c(this,w),!1),document.addEventListener("keydown",c(this,E),!1)}unmountEventListeners(){document.removeEventListener("click",c(this,w),!1),document.removeEventListener("keydown",c(this,E),!1)}register(s,i={}){let n=typeof s=="string"?document.getElementById(s):s;return n?ht.call(this,n,i):Promise.reject(new Error(`Failed to register; drawer not found with ID of: "${s.id||s}".`))}deregister(s){let i=this.get(s.id||s);return i?y.call(this,i):Promise.reject(new Error(`Failed to deregister; drawer does not exist in collection with ID of: "${s.id||s}".`))}open(s,i,n){return x.call(this,s,i,n)}close(s,i,n){return $.call(this,s,i,n)}toggle(s,i,n){return _.call(this,s,i,n)}}w=new WeakMap,E=new WeakMap;const U=new it;U.register({list:"#todo-list",items:".todo",handle:".todo__handle"},()=>console.log("Save todo order!"));U.register({list:"#menu-list",items:".menu__item",handle:".menu__handle"},()=>console.log("Save list order!"));const B=new ft({autoMount:!0});B.mount().then(()=>B.register("aside-drawer",{classModal:"aside_modal",store:!1}));const C=document.querySelector(".layout__content");C.addEventListener("click",t=>{t.target===C&&C.focus()});
